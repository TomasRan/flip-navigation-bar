/* flip-navigation-bar 22-05-2016 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):void 0!==typeof module&&module.exports?module.exports=b(require("jquery")):root.FlipNavigationBar=b(a.jQuery)}(window||{},function(a){var b=function(b){return a("<"+b+">")},c=function(a){return this.checkOptions(a),this.container=this.getContainer(),null===this.container?!1:(this.selected=this.options.defaultSelected||this.options.navData[0]&&this.options.navData[0].id,this.scrollDistance=0,this.navBar=b(this.NAV_BAR_TAG).attr({"class":this.options.navBarClass}).css({position:"relative",overflow:"hidden"}),this.container.append(this.navBar),this.preBtn=this.constructButton(this.options.preBtn).css({"float":"left"}),this.nextBtn=this.constructButton(this.options.nextBtn).css({"float":"right"}),this.preActive=this.options.preBtn.activeClass||this.options.navBtnActiveClass,this.preDisable=this.options.preBtn.disableClass||this.options.navBtnDisableClass,this.nextActive=this.options.nextBtn.activeClass||this.options.navBtnActiveClass,this.nextDisable=this.options.nextBtn.disableClass||this.options.navBtnDisableClass,this.navBar.append(this.preBtn),this.navBar.append(this.nextBtn),this.preBtnWidth=this.getWidth(this.preBtn),this.nextBtnWidth=this.getWidth(this.nextBtn),this.preBtn.on("click",function(a){this.prePage()}.bind(this)),this.nextBtn.on("click",function(a){this.nextPage()}.bind(this)),void this.render())};return c.prototype={CURSOR:"pointer",DATA_PREFIX:"data-",NAV_BAR_TAG:"nav",NAV_BUTTON_TAG:"span",NAV_MASK_TAG:"div",NAV_CONTENT_TAG:"div",NAV_ITEM_TAG:"a",DEFAULT_NAV_BAR_CLASS:"flip-nav-bar",DEFAULT_NAV_CONTENT_CLASS:"flip-nav-content",DEFAULT_NAV_ITEM_CLASS:"flip-nav-item",DEFAULT_NAV_BTN_CLASS:"flip-nav-btn",DEFAULT_NAV_BTN_ACTIVE_CLASS:"flip-nav-active-btn",DEFAULT_NAV_BTN_DISABLE_CLASS:"flip-nav-disable-btn",DEFAULT_NAV_ITEM_SELECTED_CLASS:"flip-nav-item-selected",checkOptions:function(b){this.options=a.extend({container:a(document.body),navBarClass:this.DEFAULT_NAV_BAR_CLASS,navContentClass:this.DEFAULT_NAV_CONTENT_CLASS,navItemClass:this.DEFAULT_NAV_ITEM_CLASS,navItemSelectedClass:this.DEFAULT_NAV_ITEM_SELECTED_CLASS,navBtnClass:this.DEFAULT_NAV_BTN_CLASS,navBtnActiveClass:this.DEFAULT_NAV_BTN_ACTIVE_CLASS,navBtnDisableClass:this.DEFAULT_NAV_BTN_DISABLE_CLASS,preBtn:{content:"<<"},nextBtn:{content:">>"},navData:[],defaultSelected:"",jumpToSelected:!0,callback:function(a){}},b)},getContainer:function(){if("object"==typeof this.options.container)return this.options.container;if("string"==typeof this.options.container){var b=a(this.options.container);return 0===b.length?null:b}},constructButton:function(a,c){var d=b(this.NAV_BUTTON_TAG).attr({id:a.id,"class":a.className||this.options.navBtnClass}).css({cursor:this.CURSOR}).html(a.content);return d},setItemData:function(b,c,d){var e={};a.each(d,function(a,b){e[b]=!0});for(var f in c)c.hasOwnProperty(f)&&(e[f]||b.attr(this.DATA_PREFIX+f,c[f]))},getItemData:function(a){var b={},c=a.attributes,d=new RegExp("^"+this.DATA_PREFIX+"*");for(var e in c)if(c.hasOwnProperty(e)&&d.test(c[e].name)){var f=c[e].name.replace(d,"");b[f]=c[e].value}return b},constructNavSection:function(){var c=this,d=b(c.NAV_MASK_TAG).attr({"class":c.options.navContentClass}).css({"float":"left",width:c.visualNavItemWidth+"px",overflow:"hidden"}),e=b(c.NAV_CONTENT_TAG).css({position:"relative",width:"9999999px"});d.append(e);var f=[];return a.each(c.options.navData,function(a,d){var e=b(c.NAV_ITEM_TAG).attr({"class":c.options.navItemClass}).css({cursor:c.CURSOR,"float":"left"}).html(d.content);c.setItemData(e,d,["content"]),f.push(e)}),e.append(f),e.on("click",c.NAV_ITEM_TAG,function(b){var d=a(this).attr(c.DATA_PREFIX+"id");c.select(d)}),c.navContent=e,c.navMask=d,d},getTargets:function(a,b){return b&&"object"!=typeof b?this.navBar.find("["+a+"="+b+"]"):[]},select:function(b,c){var d=this.getTargets(this.DATA_PREFIX+"id",b+"");if(0===d.length)return!1;var e=d[0],f=this.getItemData(e);this.clearSelection(),this.selected=b,a(e).addClass(this.options.navItemSelectedClass),this.options.jumpToSelected&&this.jumpToItem(b),this.options.callback.call(this,f)},clearSelection:function(){this.navBar.find(this.NAV_ITEM_TAG).removeClass(this.options.navItemSelectedClass)},getWidth:function(b,c){var d=0,e=parseFloat(b.css("width")),f=parseFloat(b.css("padding-right")),g=parseFloat(b.css("padding-left")),h=parseFloat(b.css("margin-right")),i=parseFloat(b.css("margin-left")),j=parseFloat(b.css("border-left-width")),k=parseFloat(b.css("border-right-width")),l={cw:e,pr:f,pl:g,mr:h,ml:i,bl:j,br:k};return void 0===c&&(c=["cw","pr","pl","mr","ml","bl","br"]),a.each(c,function(a,b){d+=l[b]}),d},getTotalNavItemWidth:function(){var b=this.navContent.children().length;if(0===b)return 0;var c=this.navContent.children()[0],d=this.navContent.children()[b-1],e=a(d).position().left-a(c).position().left+this.getWidth(a(d));return Math.ceil(e)},hasNextPage:function(){return Math.abs(this.scrollDistance)<this.totalNavItemWidth-this.visualNavItemWidth},hasPrePage:function(){return this.scrollDistance<0},handleBtn:function(){this.hasNextPage()?(this.nextBtn.removeClass(this.nextDisable).addClass(this.nextActive),this.nextBtn.css("cursor","pointer")):(this.nextBtn.removeClass(this.nextActive).addClass(this.nextDisable),this.nextBtn.css("cursor","auto")),this.hasPrePage()?(this.preBtn.removeClass(this.preDisable).addClass(this.preActive),this.preBtn.css("cursor","pointer")):(this.preBtn.removeClass(this.preActive).addClass(this.preDisable),this.preBtn.css("cursor","auto"))},getPreOffset:function(){for(var b=this.navContent.children(),c=Math.abs(this.scrollDistance),d=0,e=0;e<b.length;e++){var f=this.getWidth(a(b[e]),["cw","br","bl","pr","pl"]);if(d=f+parseFloat(a(b[e]).css("margin-left"))+a(b[e]).position().left,d>c)return d-c;if(d===c){var g=b[e+1]?b[e+1]:null;return g?parseFloat(a(g).css("margin-left"))+parseFloat(a(b[e]).css("margin-right")):0}}},getNextOffset:function(){for(var b=this.navContent.children(),c=Math.abs(this.scrollDistance),d=0,e=0;e<b.length;e++){var f=this.getWidth(a(b[e]),["cw","br","bl","pr","pl"]);if(d=f+parseFloat(a(b[e]).css("margin-left"))+a(b[e]).position().left,d>c)return f-(d-c);if(d===c){var g=b[e+1]?b[e+1]:null;return g?-parseFloat(a(g).css("margin-left"))-parseFloat(a(b[e]).css("margin-right")):0}}},preItem:function(){var b=this.getTargets(this.DATA_PREFIX+"id",this.selected+"");if(0===b.length)return!1;var c=a(b[0]).index();if(0===c)return!1;var d=a(this.navContent.children()[c-1]).attr(this.DATA_PREFIX+"id");this.select(d,!0)},nextItem:function(){var b=this.getTargets(this.DATA_PREFIX+"id",this.selected+"");if(0===b.length)return!1;var c=this.navContent.children().length-1,d=a(b[0]).index();if(c===d)return!1;var e=a(this.navContent.children()[d+1]).attr(this.DATA_PREFIX+"id");this.select(e,!0)},prePage:function(){if(this.hasPrePage()){var a=this.getPreOffset();this.scrollDistance+=this.visualNavItemWidth,this.hasPrePage()?0!==a&&(this.scrollDistance-=a):this.scrollDistance=0,this.navContent.css("margin-left",this.scrollDistance+"px")}this.handleBtn()},nextPage:function(){if(this.hasNextPage()){this.scrollDistance-=this.visualNavItemWidth;var a=this.getNextOffset();this.hasNextPage()?0!==a&&(this.scrollDistance+=a):this.scrollDistance=this.visualNavItemWidth-this.totalNavItemWidth,this.navContent.css("margin-left",this.scrollDistance+"px")}this.handleBtn()},jumpToItem:function(b){var c=this.getTargets(this.DATA_PREFIX+"id",b+"");if(0===c.length)return!1;var d=this.getWidth(a(c[0]),["ml","cw"]),e=a(c[0]).position().left,f=Math.abs(this.scrollDistance);e>=f&&e<=f+this.visualNavItemWidth-d||(this.scrollDistance=-a(c[0]).position().left-this.getWidth(a(c[0]),["ml"]),this.hasPrePage()?this.hasNextPage()||(this.scrollDistance=this.visualNavItemWidth-this.totalNavItemWidth):this.scrollDistance=0,this.navContent.css("margin-left",this.scrollDistance+"px"),this.handleBtn())},changeItemStatus:function(b,c){var d=this.getTargets(this.DATA_PREFIX+"id",b+"");if(0===d.length)return!1;var e=a(d[0]),f=e.attr(this.DATA_PREFIX+"status");e.removeClass(f),e.attr(this.DATA_PREFIX+"status",c)},render:function(){this.containerWidth=parseFloat(this.container.css("width")),this.visualNavItemWidth=this.nextBtn.position().left-this.preBtnWidth;var a=this.constructNavSection();this.preBtn.after(a),this.totalNavItemWidth=this.getTotalNavItemWidth(),this.nextBtn.css("margin-left",-this.totalNavItemWidth+"px"),this.navContent.css("width",this.totalNavItemWidth+"px"),this.select(this.selected),this.handleBtn()}},c});