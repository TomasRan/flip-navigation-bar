/* flip-navigation-bar 30-04-2016 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):void 0!==typeof module&&module.exports?module.exports=b(require("jquery")):a.FlipNavigationBar=b(a.jQuery)}(window||{},function(a){var b=function(b){return a(document.createElement(b))},c=function(a){var b=document.createElement("style");if(b.setAttribute("type","text/css"),b.styleSheet)b.styleSheet.cssText=a;else{var c=document.createTextNode(a);b.appendChild(c)}var d=document.getElementsByTagName("head");d.length?d[0].appendChild(b):document.documentElement.appendChild(b)},d=function(a){this.checkOptions(a),this.selected=this.options.defaultSelected||"",this.container=this.getContainer(),this.scrollDistance=0,this.navItemWidth=parseFloat(this.options.navItemWidth)||0,this.navBar=b(this.NAV_BAR).attr({id:this.options.navBarId}).css({width:parseFloat(this.options.navBarWidth)+"px"||0,"white-space":"nowrap",overflow:"hidden"}),this.navBar.addClass(this.options.navBarClass),this.container.append(this.navBar),this.setNavBarSize(),this.preBtn=this.constructButton(this.options.preBtn,"left"),this.nextBtn=this.constructButton(this.options.nextBtn,"right"),this.navBar.append(this.preBtn),this.navBar.append(this.nextBtn),this.preBtnWidth=this.getOccupationWidth(this.preBtn,["all"]),this.nextBtnWidth=this.getOccupationWidth(this.nextBtn,["all"]),this.bindEvent(this.preBtn,"click",function(a){this.handlePreAction(),this.handleBtn()}.bind(this)),this.bindEvent(this.nextBtn,"click",function(a){this.handleNextAction(),this.handleBtn()}.bind(this)),this.setVisualNavWidth(),this.render()};return d.prototype={CURSOR:"pointer",NAV_BAR:"div",NAV_BUTTON:"span",NAV_MASK:"div",NAV_CONTENT:"div",NAV_ITEM:"a",DEFAULT_NAV_BAR_WIDTH:320,DEFAULT_NAV_ITEM_WIDTH:32,DEFAULT_NAV_BTN_WIDTH:30,DEFAULT_NAV_BAR_ID:"flip-nav-bar",DEFAULT_NAV_BAR_CLASS:"flip-nav-bar",DEFAULT_NAV_ITEM_CLASS:"flip-nav-item",DEFAULT_NAV_BTN_CLASS:"flip-nav-btn",DEFAULT_NAV_BTN_ACTIVE_CLASS:"flip-nav-active-btn",DEFAULT_NAV_BTN_DISABLE_CLASS:"flip-nav-disable-btn",DEFAULT_NAV_ITEM_SELECTED_CLASS:"flip-nav-item-selected",DEFAULT_STYLE:{"flip-nav-bar":'font-family: "Microsoft YaHei", arial, helvetica, sans-serif',"flip-nav-item":"padding: 5px 0px;border-top: 1px solid #d1d1d1;border-bottom: 1px solid #d1d1d1;color: #3a86d2;text-align: center;","flip-nav-btn":"padding:5px 0px;border: 1px solid #d1d1d1;text-align: center;","flip-nav-active-btn":"color: #3a86d2;","flip-nav-disable-btn":"color: #d2d2d2","flip-nav-item-selected":"background: #3a86d2;color:#fff;"},getDefaultStyle:function(){var a="";for(var b in this.DEFAULT_STYLE)this.DEFAULT_STYLE.hasOwnProperty(b)&&(a+="."+b+"{"+this.DEFAULT_STYLE[b]+"}\n");return a},checkOptions:function(b){c(this.getDefaultStyle()),this.options=a.extend({container:a(document.body),navBarId:this.DEFAULT_NAV_BAR_ID,navBarClass:this.DEFAULT_NAV_BAR_CLASS,navItemClass:this.DEFAULT_NAV_ITEM_CLASS,navItemSelectedClass:this.DEFAULT_NAV_ITEM_SELECTED_CLASS,navBarWidth:this.DEFAULT_NAV_BAR_WIDTH,navItemWidth:this.DEFAULT_NAV_ITEM_WIDTH,navBtnWidth:this.DEFAULT_NAV_BTN_WIDTH,preBtn:{id:"pre-btn",className:this.DEFAULT_NAV_BTN_CLASS,activeClass:this.DEFAULT_NAV_BTN_ACTIVE_CLASS,disableClass:this.DEFAULT_NAV_BTN_DISABLE_CLASS,content:"<<"},nextBtn:{id:"next-btn",className:this.DEFAULT_NAV_BTN_CLASS,activeClass:this.DEFAULT_NAV_BTN_ACTIVE_CLASS,disableClass:this.DEFAULT_NAV_BTN_DISABLE_CLASS,content:">>"},navData:[],statusClassMap:{},defaultSelected:"",jumpToSelected:!0,callback:function(a){console.log(a)}},b),this.options.navBarWidth=parseFloat(this.options.navBarWidth)||0,this.options.navItemWidth=parseFloat(this.options.navItemWidth)||0,this.options.navBtnWidth=parseFloat(this.options.navBtnWidth)||0},setNavBarSize:function(){this.navBarWidth=parseFloat(this.navBar.css("width"))||0,this.navBarHeight=parseFloat(this.navBar.css("height"))||0},getContainer:function(){return"object"==typeof this.options.container?this.options.container:"string"==typeof this.options.container?a(this.options.container):void 0},constructButton:function(a,c){var d=b(this.NAV_BUTTON).attr({id:a.id,"class":a.className}).css({"float":c,cursor:this.CURSOR}).html(a.content);return this.options.navBtnWidth&&d.css("width",this.options.navBtnWidth+"px"),d},setVisualNavWidth:function(){this.visualNavWidth=Math.round(this.navBarWidth-this.preBtnWidth-this.nextBtnWidth)},constructNavSection:function(){var c=b(this.NAV_MASK).css({"float":"left",width:this.visualNavWidth+"px",overflow:"hidden"}),d=b(this.NAV_CONTENT).attr({"class":this.options.navContentClass}).css({"white-space":"nowrap"});return d.appendTo(c),a.each(this.options.navData,function(a,c){var e=b(this.NAV_ITEM).attr({"class":this.options.navItemClass,"data-id":c.id,"data-current-status":c.status}).css({display:"inline-block",cursor:this.CURSOR}).html(c.content).appendTo(d);this.navItemWidth&&e.css("width",this.navItemWidth+"px"),e.addClass(this.options.statusClassMap[c.status])}.bind(this)),this.bindEvent(d,"click",function(b){if(b.target.nodeName.toLowerCase()===this.NAV_ITEM){var c=a(b.target).attr("data-id");this.select(c,!0)}}.bind(this)),this.navContent=d,this.navMask=c,c},getTargetById:function(a){return this.navBar.find("[data-id="+a+"]")},select:function(a,b){var c=this.getTargetById(a),d={id:a,status:c.attr("data-current-status")};this.clearSelection(),c.addClass(this.options.navItemSelectedClass),this.selected=a,!b&&this.options.jumpToSelected&&this.jumpToItem(a),b&&this.options.callback.call(this,d)},clearSelection:function(){this.navBar.find(this.NAV_ITEM).removeClass(this.options.navItemSelectedClass)},setItemStatus:function(a,b){var c=this.getTargetById(a),d=c.attr("data-current-status");c.removeClass(this.options.statusClassMap[d]),c.attr("data-current-status",currentStatus),c.addClass(this.options.statusClassMap[currentStatus])},getOccupationWidth:function(a,b){for(var c=parseFloat(a.css("width")),d=parseFloat(a.css("margin-left"))+parseFloat(a.css("margin-right")),e=parseFloat(a.css("padding-left"))+parseFloat(a.css("padding-right")),f=parseFloat(a.css("border-left-width"))+parseFloat(a.css("border-right-width")),g={content:c,margin:d,padding:e,border:f,all:c+d+e+f},h=0,i=0;i<b.length;i++)void 0!==b[i]&&(h+=g[b[i]]);return h},getTotalNavWidth:function(){var b=0;return a.each(this.navContent.children(),function(c,d){b+=this.getOccupationWidth(a(d),["margin","padding","border"]),b+=this.navItemWidth}.bind(this)),b},hasNext:function(){return Math.abs(this.scrollDistance)<this.totalNavWidth-this.visualNavWidth},hasPre:function(){return this.scrollDistance<0},handleBtn:function(){var a=this.options.preBtn.activeClass,b=this.options.preBtn.disableClass,c=this.options.nextBtn.activeClass,d=this.options.nextBtn.disableClass;this.hasNext()?(this.nextBtn.removeClass(d).addClass(c),this.nextBtn.css("cursor","pointer")):(this.nextBtn.removeClass(c).addClass(d),this.nextBtn.css("cursor","auto")),this.hasPre()?(this.preBtn.removeClass(b).addClass(a),this.preBtn.css("cursor","pointer")):(this.preBtn.removeClass(a).addClass(b),this.preBtn.css("cursor","auto"))},handlePreAction:function(){if(this.hasPre()){var a=Math.abs(this.scrollDistance)/this.navItemWidth,b=a-Math.floor(a),c=b?this.navItemWidth*(1-b):0;this.scrollDistance+=this.visualNavWidth,this.hasPre()?0!==c&&(this.scrollDistance-=c):this.scrollDistance=0,this.navContent.css("margin-left",this.scrollDistance+"px")}},handleNextAction:function(){if(this.hasNext()){this.scrollDistance-=this.visualNavWidth;var a=Math.abs(this.scrollDistance)/this.navItemWidth,b=a-Math.floor(a),c=this.navItemWidth*b;this.hasNext()?0!==c&&(this.scrollDistance+=c):this.scrollDistance=this.visualNavWidth-this.totalNavWidth,this.navContent.css("margin-left",this.scrollDistance+"px")}},jumpToItem:function(a){var b=this.getTargetById(a);return 0===b.length?!1:(this.scrollDistance=-(b.index()*this.navItemWidth),this.navContent.css("margin-left",this.scrollDistance+"px"),void this.handleBtn())},render:function(){var a=this.constructNavSection();this.preBtn.after(a),this.totalNavWidth=this.getTotalNavWidth(),this.navItemWidth=this.totalNavWidth/this.navContent.children().length,this.select(this.selected,!0),this.handleBtn()},bindEvent:function(a,b,c){a.on(b,function(a){c(a)})}},d});